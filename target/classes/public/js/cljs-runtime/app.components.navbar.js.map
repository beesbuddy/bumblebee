{"version":3,"sources":["app/components/navbar.cljs"],"mappings":"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","names":["f__43724__auto__","js/goog.DEBUG","temp__5825__auto__","app.components.navbar/navbar","f__43648__auto__","*current-component*-orig-val__51547","uix.core/*current-component*","*current-component*-temp-val__51548","uix.core/set-display-name","js/window","js/window.uix","js/window.uix.dev","sig__43657__auto__","js/window.uix.dev.signature!","js/window.uix.dev.register!","vec__51484","cljs.core.nth","vec__51491","vec__51494","route","set-route","cljs.core/deref","uix.core/use-state","app.router/current","authed","set-authed","app.auth/authed?","remaining","set-remaining","app.auth/token-remaining-s","uix.hooks.alpha.use_effect","uix.hooks.alpha/use-clj-deps","app.router/start!","_","cljs.core/add-watch","v","app.auth/state","G__51533","G__51534","iid","js/setInterval","G__51537","cljs.core/remove-watch","js/clearInterval","app.router/stop!","name","cljs.core.get_in","uix.compiler.aot/>el","uix.compiler.attributes/keyword->string","app.router/href","app.chunks/preload-home","cljs.core._EQ_","app.chunks/preload-about","app.chunks/preload-admin","app.auth/logout!","app.chunks/preload-login"],"sourcesContent":["(ns app.components.navbar\n  (:require [uix.core :refer [$ defui use-effect use-state]]\n            [app.router :as router]\n            [app.chunks :as chunks]\n            [app.auth :as auth]))\n\n(defui navbar []\n  (let [[route set-route] (use-state @router/current)\n        [authed set-authed] (use-state (auth/authed?))\n        [remaining set-remaining] (use-state (auth/token-remaining-s))]\n    (use-effect\n      (fn []\n        (router/start!)\n        (let [_ (add-watch router/current ::nav (fn [_ _ _ v] (set-route v)))\n              _ (add-watch auth/state ::auth (fn [_ _ _ _]\n                                                 (set-authed (auth/authed?))\n                                                 (set-remaining (auth/token-remaining-s))))\n              iid (js/setInterval #(set-remaining (auth/token-remaining-s)) 1000)]\n          (fn []\n            (remove-watch router/current ::nav)\n            (remove-watch auth/state ::auth)\n            (js/clearInterval iid)\n            (router/stop!))))\n      [])\n    (let [name (get-in route [:data :name])]\n      ($ :header {:className \"border-b\"}\n         ($ :.container {:className \"py-3 flex gap-6 items-center\"}\n            ($ :nav {:className \"flex gap-4\"}\n               ($ :a {:href (router/href :home)\n                      :onMouseEnter chunks/preload-home\n                      :className (when (= name :home) \"font-bold\")} \"Home\")\n               ($ :a {:href (router/href :about)\n                      :onMouseEnter chunks/preload-about\n                      :className (when (= name :about) \"font-bold\")} \"About\")\n               ($ :a {:href (router/href :admin)\n                      :onMouseEnter chunks/preload-admin\n                      :className (when (= name :admin) \"font-bold\")} \"Admin\"))\n            ($ :div {:className \"ml-auto flex items-center gap-3\"}\n               (when authed\n                 ($ :span {:className \"badge text-xs px-2 py-0.5 rounded bg-slate-100 border\"}\n                    (str \"token \" remaining \"s\")))\n               (if authed\n                 ($ :button {:className \"px-3 py-1 border rounded\"\n                             :onClick auth/logout!} \"Logout\")\n                 ($ :a {:href (router/href :login)\n                        :onMouseEnter chunks/preload-login\n                        :className \"px-3 py-1 border rounded\"} \"Login\")\n                 )))))))\n"]}